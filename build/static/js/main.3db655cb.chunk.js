(this.webpackJsonphex3=this.webpackJsonphex3||[]).push([[0],{13:function(e,t,n){e.exports=n.p+"static/media/board.310b02e2.svg"},14:function(e,t,n){e.exports=n(25)},19:function(e,t,n){},25:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),r=n(10),i=n.n(r),c=(n(19),n(3)),s=n(0),l=n(12),d=n(4),b={colors:{fontColor:"antiquewhite",buttonColor:"burlywood",bg1:"#434343ff",bg2:"#848484ff"},randomIndex:function(e){return Math.round(Math.random()*(e.length-1))},randomValue:function(e){return e[b.randomIndex(e)]}},u=b,f={FIRE:"fire",WATER:"water",EARTH:"earth",WIND:"wind",PLANT:"plant"},g=Object.values(f),h=function(){return Object(s.b)("svg",{viewBox:"-4 -4 144 130"},Object(s.b)("defs",null,Object(s.b)("linearGradient",{id:"linearGradient865"},Object(s.b)("stop",{style:{stopColor:"#1c1d1c",stopOpacity:1},offset:"0",id:"stop861"}),Object(s.b)("stop",{style:{stopColor:"#494849",stopOpacity:1},offset:"1",id:"stop863"}),Object(s.b)("linearGradient",{id:"linearGradient902"},Object(s.b)("stop",{style:{stopColor:"#1c1d1c",stopOpacity:1},offset:"0",id:"stop898"}),Object(s.b)("stop",{style:{stopColor:"#424344",stopOpacity:1},offset:"1",id:"stop900"}))),Object(s.b)("linearGradient",{xlinkHref:"#linearGradient865",id:"linearGradient871",x1:"33.31208",y1:"177.15852",x2:"101.88778",y2:"295.48209",gradientUnits:"userSpaceOnUse"}),Object(s.b)("linearGradient",{xlinkHref:"#linearGradient902",id:"linearGradient904",x1:"101.67748",y1:"120.29309",x2:"35.390953",y2:"1.5915558",gradientUnits:"userSpaceOnUse"})),Object(s.b)("g",{transform:"translate(0,-175)"},Object(s.b)("path",{style:{fill:"url(#linearGradient871)",fillOpacity:1,stroke:"none",strokeWidth:5,strokeMiterlimit:4,strokeDasharray:"none",strokeOpacity:1},d:"m 120.62458,266.36089 c -20.37473,35.29009 -11.92228,30.41006 -52.67176,30.41006 -40.749477,0 -32.297026,4.88002 -52.671764,-30.41006 -20.3747383,-35.29008 -20.3747383,-25.53003 0,-60.82011 20.374738,-35.29008 11.922288,-30.41006 52.671764,-30.41006 40.74948,0 32.29703,-4.88002 52.67176,30.41006 20.37474,35.29008 20.37474,25.53003 0,60.82011 z"})),Object(s.b)("g",null,Object(s.b)("path",{style:{display:"inline",fill:"none",fillOpacity:1,stroke:"url(#linearGradient904)",strokeWidth:4,strokeMiterlimit:4,strokeDasharray:"none",strokeOpacity:1},d:"m 120.62459,91.360892 c -20.37474,35.290088 -11.92229,30.410058 -52.67177,30.410058 -40.749479,0 -32.297028,4.88003 -52.671768,-30.410059 C -5.0936869,56.070807 -5.0936869,65.830857 15.281053,30.540773 35.655792,-4.7493108 27.203341,0.13071424 67.95282,0.13071442 c 40.74948,1.8e-7 32.29703,-4.88002492 52.67177,30.41005958 20.37474,35.290084 20.37474,25.530034 0,60.820118 z"})))},p=function(){return Object(s.b)("path",{d:"m 120.62458,266.36089 c -20.37473,35.29009 -11.92228,30.41006 -52.67176,30.41006 -40.749477,0 -32.297026,4.88002 -52.671764,-30.41006 -20.3747383,-35.29008 -20.3747383,-25.53003 0,-60.82011 20.374738,-35.29008 11.922288,-30.41006 52.671764,-30.41006 40.74948,0 32.29703,-4.88002 52.67176,30.41006 20.37474,35.29008 20.37474,25.53003 0,60.82011 z"})},m=function(){return Object(s.b)("g",null,Object(s.b)("path",{style:{fill:"#ffffff",fillOpacity:.5,stroke:"none"},d:"M 24.46745,37.310295 C 5.7151846,68.789506 -6.3341638,69.596515 17.397721,33.186606 37.772461,-2.1034773 29.32001,2.7765477 70.069489,2.7765479 c 40.749481,2e-7 47.646671,9.9088231 7.314628,8.4874391 C 33.191732,9.7065573 41.200266,6.3951923 24.46745,37.310295 Z"}),Object(s.b)("path",{style:{fill:"#000000",fillOpacity:.5,stroke:"none"},d:"m 111.88455,85.671883 c 20.00022,-36.493381 32.12453,-31.946038 7.06973,4.652857 -20.374765,35.29011 -11.93304,29.47407 -52.671795,30.41008 -41.127458,0.94494 -47.659366,-10.01474 -7.314632,-9.01661 40.034677,0.99046 36.183852,2.41195 52.916697,-26.046327 z"}))};var v=function(e){var t,n,a,o={color:"black",stroke:e.selected?"white":"black",strokeWidth:4,fill:"currentColor",animation:e.animation},r={color:"gold",position:"absolute",top:0,width:"100%",textAlign:"center"};switch(e.data&&(r.fontSize=8*e.data.gameRatio+"vmin"),e.type){case"play":t=d.e,n=u.colors.buttonColor;break;case"ranking":t=d.f,n=u.colors.buttonColor;break;case"back":t=d.a,n=u.colors.buttonColor;break;case f.FIRE:t=d.b,n="orange";break;case f.WATER:t=d.g,n="deepskyblue";break;case f.EARTH:t=d.d,n="brown";break;case f.WIND:t=d.h,n="white";break;case f.PLANT:t=d.c,n="green";break;default:t=null,o=Object(s.a)(o,{fill:"none"})}return a=Object(s.a)({color:n}),Object(s.b)("div",Object.assign({css:o},e),t?Object(s.b)("svg",{viewBox:"-4 -4 144 130"},Object(s.b)("g",{transform:"translate(0,-175)",css:a},Object(s.b)(p,null)),Object(s.b)(l.a,{icon:t,transform:"shrink-8 left-0.5 up-0.5"}),Object(s.b)(m,null)):Object(s.b)(h,null),Object(s.b)("div",{css:r},e.letter))};var y=function(e){var t={height:"100%",display:"flex",flexDirection:"column",fontSize:25*e.data.gameRatio+"vmin",alignItems:"center",justifyContent:"center"},n={width:.35*Math.min(e.data.gameWidth,e.data.gameHeight)},a=[Object(s.b)(v,{type:"play",css:n,onClick:function(){return e.events.play()},key:"0"}),Object(s.b)(v,{type:"ranking",css:n,onClick:function(){return e.events.ranking()},key:"1"})];return e.data.landscape&&(a=Object(s.b)("div",{css:{width:"100%",display:"flex"}},Object(s.b)("div",{className:"filler"}),a,Object(s.b)("div",{className:"filler"}))),Object(s.b)("div",{css:t},Object(s.b)("div",{css:{filter:"drop-shadow(0px 0px 5px black)"}},"Hex 3"),a)},O=n(5),j="linear-gradient(0deg, ".concat(u.colors.bg1,", ").concat(u.colors.bg2,")");function x(e){var t={padding:6},n={position:"relative",width:e.data.landscape?"100%":"20%"},a={position:"absolute",top:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},o={width:e.data.landscape?e.data.uiSize:"100%",zIndex:10,backgroundImage:j,display:"flex",flexDirection:e.data.landscape?"column":"row",padding:4,alignItems:"center",fontWeight:"bold"};return Object(s.b)("div",{css:[o,Object(O.a)({},e.style)]},Object(s.b)("div",{css:n},Object(s.b)(v,null),Object(s.b)("div",{css:a},e.gameSession.score)),Object(s.b)("div",{css:[t,{flexGrow:1}]},"Score"),Object(s.b)("div",{css:t},"Moves",Object(s.b)("br",null),"Left"),Object(s.b)("div",{css:n},Object(s.b)(v,null),Object(s.b)("div",{css:a},e.gameSession.moves)))}function k(e){Object(a.useEffect)((function(){var t={};Object.values(f).forEach((function(e){var n=document.getElementById("score_".concat(e));t[e]=n.getBoundingClientRect()})),e.onScoresPositions(t)}));var t=Object.values(f).map((function(e){return Object(s.b)("div",{css:{padding:4,flexGrow:1},key:e,id:"score_".concat(e)},Object(s.b)(v,{type:e,css:{width:"100%"}}))})),n={display:"flex",flexDirection:e.data.landscape?"column":"row",width:e.data.landscape?e.data.uiSize:"100%",zIndex:1,backgroundImage:j};return Object(s.b)("div",{css:n},t)}var w=n(6),S={N:"N",NE:"NE",SE:"SE",S:"S",SW:"SW",NW:"NW",getDirection:function(e,t){if(e.x===t.x){if(e.y===t.y+1)return S.N;if(e.y===t.y-1)return S.S}else if(e.x===t.x-1){if(e.y===t.y)return S.SE;if(e.y===t.y+1)return S.NE}else if(e.x===t.x+1){if(e.y===t.y)return S.NW;if(e.y===t.y-1)return S.SW}return null},getHex:function(e,t,n,a){var o,r=function(t,n){return e[t]?e[t][n]:null};switch(a){case S.N:o=r(t,n-1);break;case S.NE:o=r(t+1,n-1);break;case S.NW:o=r(t-1,n);break;case S.S:o=r(t,n+1);break;case S.SE:o=r(t+1,n);break;case S.SW:o=r(t-1,n+1);break;default:o=null}return o},findMatchesFor:function(e,t,n){for(var a,o=[];t&&!t.type;)t=S.getHex(e,t.x,t.y,n);if(!t)return[];for(a=[t],t=S.getHex(e,t.x,t.y,n);t&&t.type;)t.type===a[0].type?(a.push(t),3===a.length&&o.push(a)):a=[t],t=S.getHex(e,t.x,t.y,n);return o},findMatches:function(e){for(var t=[],n=0;n<e.length;n++)t=t.concat(S.findMatchesFor(e,e[n][0],S.S));for(var a=0;a<e.length;a++)t=t.concat(S.findMatchesFor(e,e[0][a],S.SE));for(var o=0;o<e.length;o++)t=t.concat(S.findMatchesFor(e,e[o][0],S.SW));for(var r=1;r<e.length;r++)t=t.concat(S.findMatchesFor(e,e[e.length-1][r],S.SW));return t}},M=S,E=n(13),z=n.n(E);function C(){var e=Object(w.a)(["\n\t\t\tfrom { "," }\n\t\t\t30% { "," }\n\t\t\tto { "," }\n\t\t"]);return C=function(){return e},e}function W(){var e=Object(w.a)(["\n\t\t\tfrom { "," }\n\t\t\tto { "," }\n\t\t"]);return W=function(){return e},e}function I(){var e=Object(w.a)(["\n\t\t\tfrom, to { "," }\n\t\t\t50% { "," }\n\t\t"]);return I=function(){return e},e}var N="init",R="ready",G="unmatch",H="match",F="explosion",A="fall",D="over",B={x:-1,y:-1,type:"none"},L=10,P=-14,T=11,_=6.5,U=[],J=function(){for(;U.length<=5;)U=U.concat(Object.values(f));return U.splice(u.randomIndex(U),1)[0]},V=function(){for(var e=[],t=0;t<7;t++){e.push([]);for(var n=0;n<7;n++)Math.pow(t,2)+Math.pow(n,2)<=4||Math.pow(7-t-1,2)+Math.pow(7-n-1,2)<=4?e[t][n]={x:t,y:n}:(e[t][n]={x:t,y:n,type:J(),state:"init"},e[t][n].fallFrom={x:t,y:n-10})}for(var a=M.findMatches(e),o=100;a.length>0&&o>0;)a.forEach((function(e){e[u.randomIndex(e)].type=J()})),a=M.findMatches(e),o--;return e};var q=function(e){var t=Object(a.useState)(N),n=Object(c.a)(t,2),o=n[0],r=n[1],i=Object(a.useState)(null),l=Object(c.a)(i,2),d=l[0],b=l[1],f=Object(a.useState)(B),h=Object(c.a)(f,2),p=h[0],m=h[1],y=Object(a.useState)([]),O=Object(c.a)(y,2),j=O[0],x=O[1],k=Object(a.useState)(V()),w=Object(c.a)(k,1)[0],S=0,E=function(e){for(var t=0;t<w.length;t++)for(var n=w.length-1;n>=0;n--)w[t][n].type&&e(w[t][n],t,n)},U=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"%";return{left:L+e.x*T+t,top:P+e.x*_+2*e.y*_+t}},J=function(e){var t=U(e.fallFrom),n=U(e),a=Object(s.c)({from:t,to:n}),o=(w.length>>1)+2*(w.length-1),r=e.x+2*e.y,i=1+(e.y-e.fallFrom.y)/w.length-r/o;return e.y>w.length&&(i+=2),"".concat(a," ").concat(i,"s ease")},q=function(t){var n;switch(t.state){case N:n=J(t);break;case G:n=function(e){var t=U(e),n=U(e.target),a=Object(s.c)(I(),t,n);return"".concat(a," 0.5s ease")}(t);break;case H:n=function(e){var t=U(e),n=U(e.target),a=Object(s.c)(W(),n,t);return"".concat(a," 0.25s ease")}(t);break;case F:n=function(t){var n=document.getElementById("board").getBoundingClientRect(),a=document.getElementById(t.x+"_"+t.y).getBoundingClientRect(),o=e.getScoresPositions()[t.type],r={left:Math.round(100*(o.x-n.x+(o.width-a.width)/2)/n.width)+"%",top:Math.round(100*(o.y-n.y+(o.width-a.height)/2)/n.height)+"%"},i=U(t,0),c=U(t.target,0);c.left=i.left+.3*(i.left-c.left)+"%",c.top=i.top+.3*(i.top-c.top)+"%",i.left+="%",i.top+="%";var l=Object(s.c)(C(),i,c,r);return"".concat(l," 1.2s ease")}(t);break;case A:n=J(t);break;case D:n=function(e){return e.fallFrom={x:e.x,y:e.y},e.y+=2*w.length,J(e)}(t);break;default:return}return S++,n},Y=function(){e.gameOver?(E((function(e){e.state=D})),r(D),Q(!0)):r(R)},Z=function(){r(F),j.forEach((function(e){var t=e.reduce((function(e,t){return{x:e.x+t.x,y:e.y+t.y}}),B);t.x=t.x/e.length+.5*Math.random(),t.y=t.y/e.length+.5*Math.random(),e.forEach((function(e){e.state=F,e.target=t}))}))},K=function(){w.forEach((function(e){e.forEach((function(e){delete e.state}))}))},Q=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=[];E((function(a,o,r){var i=U(a);i.position="absolute",i.width="14%";var c="";t&&(2===o&&2===r&&(c="G"),3===o&&2===r&&(c="A"),4===o&&2===r&&(c="M"),5===o&&2===r&&(c="E"),1===o&&4===r&&(c="O"),2===o&&4===r&&(c="V"),3===o&&4===r&&(c="E"),4===o&&4===r&&(c="R")),n.push(Object(s.b)(v,{data:e.data,letter:c,css:i,key:"s_"+a.x+"_"+a.y}))})),b(n)};Object(a.useEffect)(Q,[]);var X=[];E((function(t){var n=q(t),a=U(t);a.position="absolute",a.width="14%",a.zIndex=t.state===F?1:0;var i=Object(s.b)(v,{data:e.data,css:a,type:t.type,selected:t.x===p.x&&t.y===p.y,animation:n,id:t.x+"_"+t.y,key:t.x+"_"+t.y,onClick:function(){return $(t)},onAnimationEnd:function(){return function(t){if(t.state===D&&delete t.type,!(--S>0))if(K(),o===F||o===G){var n=j.reduce((function(e,t){return e+t.length}),0);if(e.events.onMatch(n),o===F){r(A);var a=[];j.forEach((function(e){e.forEach((function(e){w[e.x][e.y]=B,-1===a.indexOf(e)&&a.push(e)}))})),E((function(e,t,n){if(e===B){for(var o=n-1,r=w[t][o];r&&r.type&&r===B;)o--,r=w[t][o];r&&r.type?(r.fallFrom={x:r.x,y:r.y},w[t][r.y]=B):((r=a.pop()).fallFrom={x:t,y:n-w.length-1},r.type=u.randomValue(g)),w[t][n]=r,r.x=t,r.y=n,r.state=A,q(r)}}))}else Y()}else o===H?Z():o===A?(j=M.findMatches(w),x(j),j.length>0?Z():Y()):o===D&&e.events.onGameOver()}(t)}});X.push(i)}));var $=function(t){if(M.getDirection(p,t)){e.events.onMove();var n=t.type;t.type=p.type,p.type=n,j=M.findMatches(w),x(j),t.target=p,p.target=t,0===j.length?(p.type=t.type,t.type=n,r(G),p.state=t.state=G):(r(H),p.state=t.state=H),m(B)}else m(t)},ee=Object(s.a)({position:"relative",width:e.data.boardSize,height:e.data.boardSize,backgroundImage:"URL(".concat(z.a,")"),backgroundSize:"contain"});return Object(s.b)("div",{css:ee,id:"board"},d,X)};var Y=function(e){var t=Object(a.useState)({score:0,moves:20}),n=Object(c.a)(t,2),o=n[0],r=n[1],i=Object(a.useState)(!1),l=Object(c.a)(i,2),d=l[0],b=l[1],u={onMove:function(){o.moves--,r({score:o.score,moves:o.moves}),b(0===o.moves)},onMatch:function(e){r({score:o.score+e,moves:o.moves})},onGameOver:function(){e.events.ranking(o.score)}},f=[],g={height:"100%",display:"flex",flexDirection:e.data.landscape?"row":"column"},h={display:"flex",flexDirection:e.data.landscape?"row":"column",flexGrow:1,width:e.boardSize,pointerEvents:o.moves>0?"all":"none"};return Object(s.b)("div",{className:"Game",css:g},Object(s.b)(x,{data:e.data,gameSession:o}),Object(s.b)(k,{data:e.data,onScoresPositions:function(e){return f=e}}),Object(s.b)("div",{css:h},Object(s.b)("div",{className:"filler"}),Object(s.b)(q,{data:e.data,gameOver:d,getScoresPositions:function(){return f},events:u}),Object(s.b)("div",{className:"filler"})))},Z=[{score:100,name:"Rodris"},{score:90,name:"Anne"},{score:80,name:"Harry"},{score:70,name:"Fisch"},{score:60,name:"Wendy"},{score:50,name:"Mary"},{score:40,name:"Phill"},{score:30,name:"Leah"},{score:20,name:"Rey"},{score:10,name:"Noah"}];var K=function(e){var t=JSON.parse(localStorage.getItem("ranking"))||Z,n={score:e.score,new:!0},a=t.findIndex((function(t){return t.score<e.score}));a>=0&&(t.splice(a,0,n),t.pop());var o=function(e){n.name=e.target.value},r={height:"100%",display:"flex",flexDirection:"column",fontSize:25*e.data.gameRatio+"vmin",textAlign:"center",overflowY:"auto"},i={position:"relative",fontSize:10*e.data.gameRatio+"vmin",textAlign:"left",margin:"4px 4px",padding:"4px 10px",borderRadius:15,backgroundImage:"linear-gradient(45deg, ".concat(u.colors.bg2,", transparent)"),filter:"drop-shadow(0px 0px 5px black)"},c={width:"75%",color:u.colors.fontColor,border:"none",backgroundColor:"transparent",fontSize:10*e.data.gameRatio+"vmin"},l={position:"absolute",top:0,right:8,width:.17*e.data.minSize},d=Object(O.a)({},l,{top:13,textAlign:"center",fontSize:6*e.data.gameRatio+"vmin"}),b=t.map((function(e,t){return Object(s.b)("div",{css:i,key:t},e.new?Object(s.b)("div",null,Object(s.b)("input",{autoFocus:!0,type:"text",css:c,onChange:o})):Object(s.b)("div",null,e.name),Object(s.b)(v,{css:l},"ok"),Object(s.b)("div",{css:d},e.score))}));return Object(s.b)("div",{css:r},Object(s.b)("div",{css:{filter:"drop-shadow(0px 0px 5px black)",marginBottom:10}},"Ranking"),b,Object(s.b)("div",null,Object(s.b)(v,{css:{width:"20%",margin:"auto"},type:"back",onClick:function(){n.name&&delete n.new,localStorage.setItem("ranking",JSON.stringify(t)),e.events.main()}})))};function Q(){var e=document.body.getBoundingClientRect(),t={};return t.landscape=e.height<e.width&&e.height<700,t.landscape?(t.gameHeight=Math.min(e.height,500),t.gameWidth=Math.min(e.width,9*t.gameHeight/5),t.boardSize=Math.min(t.gameHeight,5*t.gameWidth/7)):(t.gameWidth=Math.min(e.width,500),t.gameHeight=Math.min(e.height,9*t.gameWidth/5),t.boardSize=Math.min(t.gameWidth,5*t.gameHeight/7)),t.minSize=Math.min(t.gameWidth,t.gameHeight),t.uiSize=t.boardSize/5,t.gameRatio=t.boardSize/Math.min(e.width,e.height),t.style={width:t.gameWidth,height:t.gameHeight,margin:"auto",overflow:"hidden",color:u.colors.fontColor,backgroundImage:"linear-gradient(-45deg, ".concat(u.colors.bg1,", ").concat(u.colors.bg2,")")},t}var X=function(){var e,t=Object(a.useState)(Q()),n=Object(c.a)(t,2),o=n[0],r=n[1],i=Object(a.useState)("main"),l=Object(c.a)(i,2),d=l[0],b=l[1],u=Object(a.useState)(0),f=Object(c.a)(u,2),g=f[0],h=f[1];Object(a.useEffect)((function(){var e=function(){setTimeout((function(){r(Q())}),50)};window.addEventListener("orientationchange",e),window.addEventListener("resize",e)}),[]);var p={main:function(){b("main")},play:function(){b("game")},ranking:function(e){h(e),b("ranking")}};switch(d){case"main":e=Object(s.b)(y,{events:p,data:o});break;case"game":e=Object(s.b)(Y,{events:p,data:o});break;case"ranking":e=Object(s.b)(K,{events:p,data:o,score:g})}return Object(s.b)("div",{className:"App",css:o.style},e)};i.a.render(o.a.createElement(X,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.3db655cb.chunk.js.map